<%-include('partials/header.ejs' , {style:"stylesheets/style.css"}) -%>
<%-include('partials/navbar.ejs') %>
<%-include("partials/flash.ejs") %>

<% let stream %>

<body class="body ">
  <section class="container">
      <div class="container">
        <div class="row">
          <% for(let question of questions) { %>
           <%stream = question.category%>
    <div class="card mb-3 mt-3">
      <div class="card-body">
        <span style="float: right;"><%= question.createdAt.toLocaleDateString() %></span>
        <div class="card-title " ><h5 style="font-size:25px;"><%= question.statement%>?</h5> </div><hr>
        <ul>
          <li>
            <b> Category:</b><%=question.category%>
          </li>
        </ul>
       <form action="/questions/<%=question._id%>" method="GET">
        <button style="float: right;" class="openanswer btn btn-sm btn-light rounded-pill m-2 right">Read more</button>
        </form>
      </div>
      <hr />
    </div>
  </div>
  <% } %>
</div>
</section>

<%if (totalPages!==0 && totalPages !== 1){%>

  <section class="pagination">
    <div class="container">
  
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            
          <%if(Number(currentPage) === 1){%>
            <li class="page-item disabled">
              <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
            </li>
          <%} else{ %>
            <li class="page-item">
              <a class="page-link" href="?page=<%=Number(currentPage)-1%>&category=<%=stream%>" >Previous</a>
            </li>
          <%}%>
          
          <%if(totalPages>1){%>
            <%for(let i=1;i<=totalPages;i++){%>
             <% if(Number(currentPage)===i){ %>
              <li class="page-item active aria-current="page"><a class="page-link" href="?page=<%=i%>&category=<%=stream%>"><%=i%><span class="visually-hidden">(current)</span></a></li>
             <%} else{%>
              <li class="page-item"><a class="page-link" href="?page=<%=i%>&category=<%=stream%>"><%=i%></a></li>
              <%}%>
            <%}%>
         <%}%>
         <%if(Number(currentPage)!==Number(totalPages) && Number(totalPages)!== 0){%>
          
          <li class="page-item">
            <a class="page-link" href="?page=<%=Number(currentPage)+1%>&category=<%= stream%>">Next</a>
          </li>
         <%} else{ %>
          <li class="page-item disabled">
            <a class="page-link" href='#'>Next</a>
          </li>
         <%}%>
        
        </ul>
      </nav>
    </div>
  </section>

<%}%>
<!-- MDB -->
<script
type="text/javascript"
src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
></script>
</body>
</html>
